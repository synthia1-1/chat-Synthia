<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Chat Synthia - WhatsApp Style</title>

<!-- Meta Pixel Code -->
<script>
!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '632209706612628');
fbq('track', 'PageView');
</script>
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=632209706612628&ev=PageView&noscript=1"
/></noscript>
<!-- End Meta Pixel Code -->

<style>
/* (todo o CSS continua igual ao seu c√≥digo anterior, n√£o alterei nada) */
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <div class="avatar">S</div>
    <div class="title">
      <b>Synthia</b>
      <span id="typing">digitando‚Ä¶</span>
    </div>
  </div>
  <div id="chat" class="chat" aria-live="polite"></div>
  <div class="cta-bar" id="finalCTA">
    <a id="cta" href="https://pay.kirvano.com/8a41c662-4338-4cca-a14d-256db597d25e" target="_blank" rel="nofollow noopener">
      <button id="checkoutBtn" class="btn">Liberar Conte√∫do Exclusivo</button>
    </a>
  </div>
</div>

<script>
const chat = document.getElementById('chat');
const typing = document.getElementById('typing');
const ctaBar = document.getElementById('finalCTA');
const checkoutBtn = document.getElementById('checkoutBtn');
let userName = '';

function addBubble(who, text){
  const row = document.createElement('div');
  row.className = 'row '+who;
  const bubble = document.createElement('div');
  bubble.className = 'bubble';
  bubble.innerHTML = text + `<span class="time">${new Date().toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'})}</span>`;
  row.appendChild(bubble);
  chat.appendChild(row);
  chat.scrollTop = chat.scrollHeight;
}

function wait(ms){ return new Promise(r=>setTimeout(r,ms)); }

async function startChat(){
  addBubble('them','Oi, lindooo üòò qual √© o seu nome?');
  const nameInput = document.createElement('input');
  nameInput.type = 'text';
  nameInput.placeholder = 'Digite seu nome';
  chat.appendChild(nameInput);
  nameInput.focus();
  typing.textContent='online';

  await new Promise(r=>{
    nameInput.addEventListener('keypress', function(e){
      if(e.key==='Enter' && nameInput.value.trim()!==''){
        userName = nameInput.value.trim();
        addBubble('me', userName);
        nameInput.remove();
        typing.textContent='digitando‚Ä¶';
        
        // üî• Evento Lead
        fbq('track', 'Lead');
        
        r();
      }
    });
  });

  await wait(1200);
  addBubble('them',`Hmm adorei o nome, ${userName} üòç j√° tava ansiosa pra falar com voc√™.`);
  await wait(1000);
  addBubble('them',`Ent√£o ${userName}, quer dizer que voc√™ quer ver meu lado mais ousado n√©? Seu safadinho rsrs üòè`);

  await new Promise(r=>{
    const btn1=document.createElement('button'); btn1.className='option'; btn1.innerText='Claro amor.';
    const btn2=document.createElement('button'); btn2.className='option'; btn2.innerText='Com certeza.';
    chat.appendChild(btn1); chat.appendChild(btn2);
    typing.textContent='online';
    btn1.onclick=()=>{ addBubble('me',btn1.innerText); btn1.remove(); btn2.remove(); addBubble('them','Gostei de voc√™, agora me responde uma pergunta.'); typing.textContent='digitando‚Ä¶'; r(); };
    btn2.onclick=()=>{ addBubble('me',btn2.innerText); btn1.remove(); btn2.remove(); addBubble('them','Gostei de voc√™, agora me responde uma pergunta.'); typing.textContent='digitando‚Ä¶'; r(); };
  });

  await wait(1000);
  addBubble('them','Voc√™ prefere que eu seja mais safadinha üòà ou mais rom√¢ntica üíï?');
  await new Promise(r=>{
    const btn1=document.createElement('button'); btn1.className='option'; btn1.innerText='Safadinha üòè';
    const btn2=document.createElement('button'); btn2.className='option'; btn2.innerText='Rom√¢ntica üíã';
    chat.appendChild(btn1); chat.appendChild(btn2);
    typing.textContent='online';
    btn1.onclick=()=>{ addBubble('me',btn1.innerText); btn1.remove(); btn2.remove(); r(); };
    btn2.onclick=()=>{ addBubble('me',btn2.innerText); btn1.remove(); btn2.remove(); r(); };
  });

  typing.textContent='digitando‚Ä¶';
  await wait(1200);
  addBubble('them',`E se eu te mandasse uma foto minha agora‚Ä¶ voc√™ bateria uma pra mim? üî•`);
  await new Promise(r=>{
    const btn1=document.createElement('button'); btn1.className='option'; btn1.innerText='Claro que sim üòà';
    const btn2=document.createElement('button'); btn2.className='option'; btn2.innerText='Talvez‚Ä¶ depende da foto üëÄ';
    chat.appendChild(btn1); chat.appendChild(btn2);
    typing.textContent='online';
    btn1.onclick=()=>{ addBubble('me',btn1.innerText); btn1.remove(); btn2.remove(); r(); };
    btn2.onclick=()=>{ addBubble('me',btn2.innerText); btn1.remove(); btn2.remove(); r(); };
  });

  typing.textContent='digitando‚Ä¶';
  await wait(1200);
  addBubble('them',`Nossa, ${userName}‚Ä¶ voc√™ me deixou toda animada üòò antes de te mostrar tudo, preciso que clique abaixo e libere meu conte√∫do exclusivo.`);
  typing.textContent='online';
  ctaBar.style.display='block';
}

// Evento no checkout
checkoutBtn.addEventListener('click', () => {
  fbq('track', 'InitiateCheckout');
});

startChat();
</script>
</body>
</html>
